<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>{{ recommendation.item_type }} 인챈트 추천 상세</title>
    {% load static %}
    <style>
        body { font-family: 'Minecraft', Arial, sans-serif; padding: 20px; background-color: #c6c6c6; color: #333; }
        .container { max-width: 900px; margin: auto; background-color: #8b8b8b; border: 2px solid #363636; box-shadow: inset 0 0 0 2px #a0a0a0; padding: 20px; }
        .header { text-align: center; margin-bottom: 20px; }
        .header h1 { color: #FFF; background-color: #585858; padding: 10px; border: 2px solid #363636; box-shadow: inset 0 0 0 2px #a0a0a0; }
        .detail-info { margin-bottom: 20px; background-color: #c6c6c6; border: 2px solid #363636; padding: 15px; box-shadow: inset 0 0 0 2px #ffffff; }
        .detail-info p { margin: 5px 0; color: #202020; }
        .detail-info strong { color: #000; }

        .category-columns { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 20px;}
        .category-column {
            background-color: #c6c6c6; border: 2px solid #363636; padding: 10px;
            box-shadow: inset 0 0 0 2px #ffffff;
        }
        .category-title {
            text-align: center; font-weight: bold; margin-bottom: 10px; padding: 8px;
            background-color: #a0a0a0; color: white; border: 2px solid #363636;
            box-shadow: inset 0 0 0 2px #585858;
        }
        .enchant-item {
            background-color: #e0e0e0; border: 2px solid #585858; padding: 8px; margin-bottom: 8px;
            display: flex; align-items: center;
            box-shadow: inset 0 0 0 2px #ffffff, 0 1px 0 #8b8b8b;
        }
        .enchant-item img { width: 24px; height: 24px; margin-right: 8px; image-rendering: pixelated; }
        .enchant-item .name { font-weight: bold; flex-grow: 1; color: #333; }
        .enchant-item .description { font-size: 0.9em; color: #555; }

        .memo-section {
            background-color: #c6c6c6; border: 2px solid #363636; padding: 15px;
            box-shadow: inset 0 0 0 2px #ffffff; margin-top: 20px;
        }
        .memo-section h3 { margin-top: 0; color: #202020; }
        .memo-content {
            background-color: #e0e0e0; border: 1px solid #585858; padding: 10px;
            min-height: 80px; white-space: pre-wrap; word-wrap: break-word;
            font-size: 14px; color: #333;
        }
        .back-button-container { text-align: right; margin-top: 20px; }
        .back-button {
            padding: 8px 15px; font-family: inherit; font-size: 14px;
            background-color: #a0a0a0; border: 2px solid #363636;
            box-shadow: inset 0 0 0 2px #ffffff, 0 3px 0 #585858;
            color: #FFF; text-decoration: none; display: inline-block; cursor: pointer;
        }
        .back-button:active { box-shadow: inset 0 0 0 2px #ffffff, 0 1px 0 #585858; transform: translateY(2px); }

    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>{{ item_type_name }} 인챈트 추천</h1>
        </div>

        <div class="detail-info">
            <p><strong>작성자:</strong> {{ recommendation.user.username }}</p>
            <p><strong>작성일:</strong> {{ recommendation.created_at|date:"Y년 n월 j일 (H:i)" }}</p>
        </div>

        <div class="category-columns">
            <div class="category-column recommended-enchants">
                <div class="category-title">추천 인챈트 (S급)</div>
                {% for enchant_data in recommended_enchants %}
                    <div class="enchant-item">
                        {% if enchant_data.icon %}<img src="{% static enchant_data.icon %}" alt="">{% endif %}
                        <div>
                            <span class="name">{{ enchant_data.name }}</span><br>
                            <span class="description">{{ enchant_data.description }}</span>
                        </div>
                    </div>
                {% empty %}
                    <p style="text-align:center; color:#505050;">해당 인챈트가 없습니다.</p>
                {% endfor %}
            </div>

            <div class="category-column general-enchants">
                <div class="category-title">일반 인챈트 (A/B급)</div>
                {% for enchant_data in general_enchants %}
                    <div class="enchant-item">
                        {% if enchant_data.icon %}<img src="{% static enchant_data.icon %}" alt="">{% endif %}
                        <div>
                            <span class="name">{{ enchant_data.name }}</span><br>
                            <span class="description">{{ enchant_data.description }}</span>
                        </div>
                    </div>
                {% empty %}
                    <p style="text-align:center; color:#505050;">해당 인챈트가 없습니다.</p>
                {% endfor %}
            </div>

            <div class="category-column not-recommended-enchants">
                <div class="category-title">비추천 인챈트 (C급/저주)</div>
                {% for enchant_data in not_recommended_enchants %}
                    <div class="enchant-item">
                        {% if enchant_data.icon %}<img src="{% static enchant_data.icon %}" alt="">{% endif %}
                        <div>
                            <span class="name">{{ enchant_data.name }}</span><br>
                            <span class="description">{{ enchant_data.description }}</span>
                        </div>
                    </div>
                {% empty %}
                    <p style="text-align:center; color:#505050;">해당 인챈트가 없습니다.</p>
                {% endfor %}
            </div>
        </div>

        {% if recommendation.memo %}
        <div class="memo-section">
            <h3>메모</h3>
            <div class="memo-content">
                {{ recommendation.memo }}
            </div>
        </div>
        {% endif %}

        <div class="back-button-container">
            <a href="{% url 'enchant_recommender:list' %}" class="back-button">목록으로 돌아가기</a>
        </div>
    </div>
</body>
</html>