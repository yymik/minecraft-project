{% extends "base.html" %}
{% block title %}토론 - 스티븐 위키{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-12">
            <h1 class="mb-4">
                <i class="fas fa-comments text-primary me-2"></i>토론
            </h1>
            
            <!-- 검색 및 필터 -->
            <div class="row mb-4">
                <div class="col-md-8">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="토론 검색...">
                        <button class="btn btn-outline-secondary" type="button">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>
                <div class="col-md-4">
                    <select class="form-select">
                        <option value="">전체 카테고리</option>
                        <option value="광물">광물</option>
                        <option value="건축">건축</option>
                        <option value="인챈트">인챈트</option>
                        <option value="네더">네더</option>
                    </select>
                </div>
            </div>

            <!-- 토론 목록 -->
            <div class="list-group">
                {% for discussion in discussions %}
                <div class="list-group-item list-group-item-action">
                    <div class="d-flex w-100 justify-content-between align-items-start">
                        <div class="flex-grow-1">
                            <div class="d-flex align-items-center mb-2">
                                <h5 class="mb-0 me-3">{{ discussion.title }}</h5>
                                <span class="badge bg-{% if discussion.status == 'hot' %}danger{% else %}primary{% endif %} me-2">
                                    {{ discussion.category }}
                                </span>
                                {% if discussion.status == 'hot' %}
                                <span class="badge bg-warning text-dark">
                                    <i class="fas fa-fire"></i> HOT
                                </span>
                                {% endif %}
                            </div>
                            <div class="d-flex align-items-center text-muted small">
                                <span class="me-3">
                                    <i class="fas fa-user me-1"></i>{{ discussion.author }}
                                </span>
                                <span class="me-3">
                                    <i class="fas fa-clock me-1"></i>{{ discussion.date }}
                                </span>
                                <span class="me-3">
                                    <i class="fas fa-reply me-1"></i>{{ discussion.replies }}개 댓글
                                </span>
                                <span>
                                    <i class="fas fa-history me-1"></i>최근 활동: {{ discussion.last_activity }}
                                </span>
                            </div>
                        </div>
                        <div class="text-end">
                            <a class="btn btn-outline-primary btn-sm"
                               href="{{ discussion.link|default:'/wiki/discussions/' }}">
                                <i class="fas fa-eye"></i> 보기
                            </a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>

            <!-- 새 토론 시작 -->
            <div class="mt-4 text-center">
                <a href="{% url 'wiki:discussion_new' %}" class="btn btn-primary btn-lg">
                    <i class="fas fa-plus me-2"></i>새 토론 시작하기
                </a>
            </div>
        </div>
    </div>
</div>

<style>
.list-group-item {
    border-left: 4px solid transparent;
    transition: all 0.3s ease;
}

.list-group-item:hover {
    border-left-color: #007bff;
    background-color: #f8f9fa;
}

.badge {
    font-size: 0.75em;
}
</style>
{% endblock %}
